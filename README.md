# Universe

我希望将`Universe`打造成一个大而全的框架，超越Nest，比肩Spring

## Features

- 生命周期管理
- 分布式组件
- DDD思想
- 依赖注入
- 链路追踪

### 生命周期管理

一个程序从启动，到程序结束(不论是由于异常退出，还是人为手动Crtl-C退出)，都需要管理起来。

- 启动：
  - 配置加载
  - 初始化连接
  - 初始化服务
  
- 结束：
  - 关闭服务，**停止接收新的处理**
  - **等待已经在处理的服务处理结束**
  - 关闭连接
  - 退出程序
  
  
### 分布式组件

支持一切分布式组件，比如数据库，消息队列，Http服务等等等等

程序不只是http服务，也可以是消息队列服务，个人人为Nest比较局限的一点就是Http服务。

服务不应该只有Http，一切皆服务，重点在于你的程序想启动哪些服务。

假如我一个程序，只需要消费一个消息队列，来做一些分析，数据格式转化并入库的操作，这时候，只需要一个kafka的consumer服务就可以了。

**能处理"请求"的都叫服务，请求可能是http，也可能是一个消息，也可能是一个通知，以各种方式告知我们的服务需要做一些处理**

- Http服务
- 消息队列消费服务
- redis键空间通知服务

### DDD思想

这个我理解的也不深，但是对框架架构比较有指导意义的思想。

程序可以分成几层

- controller层
- domain层
- service层
- model层(dao)

上层可以直接或越级使用下层，比如：controller层可以使用domain层，使用service层，使用model层，但是service层肯定不能使用domain层

- controller层：组合任意层，对外提供服务的处理流
- domain层：封装通用逻辑过程，比如：有两个controller都需要用到 两个service，并且这两个处理过程及其相似，使用domain层可以减少样板代码
- service层：单一职责，service层封装的要纯粹，service的一个方法只做一件事
- model层：数据提供层，数据的来源可以从任意地方来，比如http调用，数据库获取，缓存获取，等等等等，一切可以获取数据的都处在这一层。





















